<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>JQuery</title>
    <script src="https://cdn.jsdelivr.net/npm/jquery@3.6.0/dist/jquery.slim.min.js"></script>
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/css/bootstrap.min.css">
    <script src="https://cdn.jsdelivr.net/npm/popper.js@1.16.1/dist/umd/popper.min.js"></script>
    <script src="https://cdn.jsdelivr.net/npm/bootstrap@4.6.1/dist/js/bootstrap.bundle.min.js"></script>
    <!--    --------------icon------------>
    <script src='https://kit.fontawesome.com/a076d05399.js' crossorigin='anonymous'></script>
</head>
<style>
    *{
        margin: 0;
        padding: 0;
    }
    .row{
        margin: 0;
        padding: 0;
        width: 100%;
        height: auto;
    }
    .col-sm-8{
        margin-top: 70px;
        background-color: #cccc;
        width: 100%;
        height: auto;
        float: left;
        position: relative;
    }
    .col-sm-4{
        margin-top: 70px;
        background-color: #0f6674;
        width: 370px;
        height: 100vh;
        position: fixed;
        float: right;
        right: 0;
        margin-right: 205px;
    }
    /*///////cart*/
    .card {
        box-shadow: 0 4px 8px 0 rgba(0, 0, 0, 0.2);
        max-width: 200px;
        margin: auto;
        text-align: center;
        font-family: arial;
        float: left;
        margin: 30px 18px 18px 18px;
    }
    .icon{
        position: absolute;
        top: 0;
        right: 0;
        background-color: #ef0404;
        width: 50px;
        height: 25px;
        line-height: 25px;
        /*border-radius: 5px 0 0 5px ;*/
    }

    .price {
        color: grey;
        font-size: 18px;
        color: red;
    }
    .price- {
        color: grey;
        font-size: 15px;
        text-decoration: line-through;
    }

    .card button {
        border: none;
        outline: 0;
        padding: 8px;
        color: white;
        background-color: #000;
        text-align: center;
        cursor: pointer;
        width: 100%;
        font-size: 18px;
    }

    .card button:hover {
        opacity: 0.7;
    }
    /*    --------------------*/

    form{
        margin: 25px;
    }

    /*    -------search------------*/
    input[type=text] {
        width: 290px;
        box-sizing: border-box;
        border: 2px solid #ccc;
        border-radius: 4px;
        font-size: 16px;
        background-color: white;
        background-position: 10px 10px;
        background-repeat: no-repeat;
        padding: 10px 20px 12px 40px;
        -webkit-transition: width 0.4s ease-in-out;
        transition: width 0.4s ease-in-out;
    }

    input[type=text]:focus {
        width: 100%;
    }
    /*    ----------------------------*/
    select{
        margin: 20px 0 10px 0;
        border-radius: 5px;
        width: 290px;
        height: 50px;
        font-size: 18px;
        text-align: center;
    }
    /*    ----------------select---------*/
    form a i{
        margin-top: 20px;
        font-size: 30px;
        color: yellow;
    }
    button a i{
        color: yellow;
    }
    label {
        margin-top: 10px;
        font-family:  Tahoma, Geneva, Verdana, sans-serif;
        font-size: 20px;
    }
    /*-------------------*/
    form button{
        width: 290px;
        height: 50px;
        margin-top: 120px;
    }
    /* Rating Star Widgets Style */
    .rating-stars ul {
        list-style-type:none;
        padding:0;
        -moz-user-select:none;
        -webkit-user-select:none;
    }
    .rating-stars ul > li.star {
        display:inline-block;
    }
    /* Idle State of the stars */
    .rating-stars ul > li.star > i.fa {
        font-size:2.5em; /* Change the size of the stars */
        color:#ccc; /* Color on idle state */
    }
    /* Hover state of the stars */
    .rating-stars ul > li.star.hover > i.fa {
        color:#FFCC36;
    }
    /* Selected state of the stars */
    .rating-stars ul > li.star.selected > i.fa {
        color:#FF912C;
    }
    /*    --------------------header------------*/
    .header{
        background-color: rgb(17, 12, 155);
        position: fixed;
        width: 1110px;
        height: 70px;
        z-index: 1;
    }
    /*    -------------------------giỏ hàng-----------------*/
    #addCart{
        width: 50px;
        height: 50px;
        position: relative;
        float: right;
        line-height: 60px;
        margin-right: 30px;
        border-radius: 25px;
        margin-top: 10px;
        color: #696969;
    }
    #addCart a i{
        width: 45px; height: 45px;
        font-size: 24px;
        background-color: #ffffff;
        border-radius: 50px;
        line-height: 50px;
        padding: 0 0 0 8px;
    }
    #addCart a i:hover{
        color: #ccc;
    }
    #addCart a{
        margin-top: 20px;
    }
    #addCart #icon-cart{
        color: #ffffff;
        font-size: 15px;
        position: absolute;
        border: thin solid red;
        background-color: red;
        width: 18px;
        height: 25px;
        border-radius: 50%;
        text-align: center;
        line-height: 20px;
        top: 0;
        right: 0;
    }
    /*    --------------------------------------------*/
    #inputto{
        width: 200px;
        height: 40px;
    }
    #inputfrom{
        width: 200px;
        height: 40px;
    }


</style>
<body>

<div class="container">
    <header class="header">
        <div id="addCart">
            <a><i class='fas fa-shopping-cart'></i></a>
            <p id="icon-cart">0</p>
        </div>
    </header>
    <div class="row">
        <div class="col-sm-8">
            <div id="cart">
                <table class="myTable">
                    <tbody id="myTable">
                    <tr>

                    </tr>
                    </tbody>

                </table>

            </div>
        </div >
        <div class="col-sm-4">
            <form id="form">
                <input type="text" id="myInput"  placeholder="Search for names..">
                <select id="category" name="categorylist" form="carform">
                    <option value="" selected disabled>--Chọn--</option>
                    <option value="giay">Giày</option>
                    <option value="ao">Áo</option>
                    <option value="quan">Quần</option>
                    <option value="phu kien">Phụ kiện</option>
                </select>
                <select id="sort" name="sortlist" form="carform">
                    <option value="" selected disabled>--Giá--</option>
                    <option id="minPrice" value="min">Thấp Nhất</option>
                    <option id="maxPrice" value="max" >Cao Nhất</option>
                </select><br>
                <label>Đánh giá:</label><br>
                <!-- Rating Stars Box -->
                <div class='rating-stars text-center'>
                    <ul id='stars'>
                        <li class='star' id="st1" data-value='1' value="1">
                            <i class='fa fa-star fa-fw'></i>
                        </li>
                        <li class='star' id="st2" data-value='2' value="2">
                            <i class='fa fa-star fa-fw'></i>
                        </li>
                        <li class='star'id="st3" data-value='3' value="3">
                            <i class='fa fa-star fa-fw'></i>
                        </li>
                        <li class='star' id="st4" data-value='4' value="4">
                            <i class='fa fa-star fa-fw'></i>
                        </li>
                        <li class='star'id="st5" data-value='5' value="5">
                            <i class='fa fa-star fa-fw'></i>
                        </li>
                    </ul>
                </div>

                <label >Từ &nbsp;: </label>
                <input id="inputto" name="inputto" type="text" maxlength="13" value="1" onkeyup="format()"><br>
                <label >Đến:</label>
                <input id="inputfrom" name="inputfrom" type="text" maxlength="13" value="100000000" onkeyup="format()">
<!--                <label id="total">10VND</label>-->

                <button id="pay" type="button" class="btn btn-warning" onclick="checkData()" >Add to cart</button>
            </form>
        </div>
    </div>
</div>

<script>

    let data = [
        {
            id : 1,
            name : "Nike AIR Trắng",
            category : "giay",
            pricesale : 2000000,
            price : 1900000,
            star: 3,
            sale : 50,
            image: 'http://sieurep.com/wp-content/uploads/2020/10/IMG_1667-1024x801.jpg'
        },
        {
            id : 2,
            name : "Hoodie",
            category : "ao",
            pricesale : 1000000,
            price : 990000,
            star: 5,
            sale : 10,
            image: 'https://us.stuartslondon.com/images/script-logo-teddy-hoodie-oat-p44332-448539_image.jpg'
        },
        {
            id : 3,
            name : "Tây Âu",
            category : "quan",
            pricesale : 600000,
            price : 580000,
            star: 3,
            sale : 25,
            image: 'https://product.hstatic.net/1000094286/product/1969_d_x__2__2d62254ffc9c44b08b435b81c94c9388_master.jpg'
        },
        {
            id : 4,
            name : "kính",
            category : "phu kien",
            pricesale : 400000,
            price : 390000,
            star: 2,
            sale : 30,
            image: 'https://cf.shopee.vn/file/d5cd8979ca3d7fe06e05122c79e1cc51'
        },
        {
            id : 5,
            name : "Quần short",
            category : "quan",
            pricesale : 1000000,
            price : 900000,
            star: 3,
            sale : 25,
            image: 'https://annshop.vn/wp-content/uploads/10099-1043023651-d6ba175e4929af77f638-4.png'
        },
        {
            id : 6,
            name : "Polo Nam",
            category : "ao",
            pricesale : 400000,
            price : 390000,
            star: 4,
            sale : 50,
            image: 'https://1.bp.blogspot.com/-QHWvhU56dm8/VZpC2i_tHcI/AAAAAAAABhY/bu0v5JdqGO8/s1600/3%2Bnew.jpg'
        },
        {
            id : 7,
            name : "Tất",
            category : "phu kien",
            pricesale : 50000,
            price : 39000,
            star: 3,
            sale : 30,
            image: 'https://www.tripnow.vn/wp-content/uploads/2019/07/tat-nam-cao-co-2.jpg'
        },
        {
            id : 8,
            name : "Sơmi trắng",
            category : "ao",
            pricesale : 450000,
            price : 399000,
            star: 5,
            sale : 10,
            image: 'https://www.shopbexy.com/wp-content/uploads/2019/09/Ao-So-Mi-Trang-Nu-Dep-ASMT56.jpg'
        },
        {
            id : 9,
            name : "Nike AIR",
            category : "giay",
            pricesale : 2100000,
            price : 1999000,
            star: 1,
            sale : 20,
            image: 'https://www.modern-notoriety.com/wp-content/uploads/2020/08/kith-nike-air-force-1-nyc-white-3.jpg'
        },

    ];
    $(function () {
        loadData()
        search()
        category()
        fromTo()
        sort()
        star()
    })

    function loadData() {
        let a = '';
        for (let i = 0; i < data.length; i++) {
            let start = '';
            for (let y = 0 ; y < data[i]['star'] ; y++){
                start += '<i class="fas fa-star"></i>';
            }
           a +=
                `<div class="card listProduct">
                <img src="${data[i].image}" style="width:200px" height="200px">
                <h4 class"tenSp">${data[i].name}</h4>
                <p class="price-">${data[i].pricesale}</p>
                <p class="price">${data[i].price}</p>
                <p class="category" style="display: none;">${data[i].category}</p>
                <p>
                    ${start}
                </p>
                <p><button>
                    <a>Add to cart</a>
                </button></p>
                <div class="icon">${data[i].sale}%</div>
            </div>`;
        }
        $('#myTable').html(a);
    };
    //--------------------------search--------------
   function search(){
       $('#myInput').on('input paste change', function(event) {
           event.preventDefault();
           /* Event sk*/
           var search = $(this).val().toLowerCase();
           $('#myTable .card').filter(function() {
               $(this).toggle($(this).text().toLowerCase().indexOf(search)>-1);
               console.log(' Có: ' + $('.listProduct:visible').length + ' sản phẩm');
           });
       });

   }
    //------------------------category------------------------
    function category(){
        $('#category').on('change', function(event) {
            event.preventDefault();
            /* Event sk*/
            var searchcategory = $(this).val().toLowerCase();
            console.log(searchcategory);

            let dataFilter = data.filter(item=> item.category.toLowerCase() == searchcategory)
           // console.log(dataFilter)
            // console.log(searchcategory)


            $('#myTable .card').filter(function() {
                $(this).toggle($(this).text().toLowerCase().indexOf(searchcategory)>-1);
                // let a = $(this).text().toLowerCase();
                console.log(this);
                // console.log(a);
            });
        });
    }

    //-----------------------from to---------------------
    function fromTo(){
        $('#inputto , #inputfrom').on('input', function (){
            let a = $('#inputto').val();
            // console.log(a)
            let b = $('#inputfrom').val();
            // console.log(b)
            for (let i = 0; i<data.length; i++){
                // console.log(a,data[i].price,b)
                if(a  <=data[i].price && data[i].price <= b ){
                    // console.log((data[i].price).length)
                    // console.log('gia tien ',data[i].price)
                    console.log('Có: ' + $('.listProduct:visible').length);
                    $('.listProduct:eq('+i+')').removeClass('d-none');
                }else {
                    $('.listProduct:eq('+i+')').addClass('d-none');
                }
            }
            // console.log(data.length)
        })
    }
//    -------------------sort------------------
   function sort(){
       $('#sort').on('change', function (event){
           event.preventDefault();
           ///lấy giá trị
           var minPrice = $(this).val().toLowerCase();
           var maxPrice = $(this).val().toLowerCase();

           for (let i = 0; i<data.length; i++){
               if($(this).val() === 'min'){
                   data = data.sort(function(a, b) {
                       return a['price'] - b['price'];
                   });
               }else {
                   data = data.sort(function(a, b) {
                               return b['price'] - a['price'];
                           });
               }
               loadData()
           }
           // if($(this).val() === 'min'){
           //     min();
           // }else {
           //     max();
           // }
           // loadData();

       })
   }

    // function min(){
    //     data = data.sort(function(a, b) {
    //         return a['price'] - b['price'];
    //     });
    // }
    //
    // function max(){
    //     data = data.sort(function(a, b) {
    //         return b['price'] - a['price'];
    //     });
    // }
//-------------------------format input-----------------------
   function format(){
       $(function() {
           var $form = $( "#form" );
           var $input = $form.find( "input" );

           $input.on( "keyup", function( event ) {
               var selection = window.getSelection().toString();

               var $this = $( this );
               // Get the value.
               var input = $this.val();

               var input = input.replace(/[\D\s\._\-]+/g, "");
               // input = input ? parseInt( input, 10 ) : 0; ////format dấu phẩy

               $this.val( function() {
                   return ( input === 0 ) ? "" : input.toLocaleString( "en-US" );
               } );
           } );

       });
   }

//----------------------------------------------------
    /* Code su kien JS */
    $(document).ready(function(){
        /* 1. Hình dung mọi thứ trên Hover - Xem phần tiếp theo để biết hành động khi nhấp chuột */
        $('#stars li').on('mouseover', function(){
            var onStar = parseInt($(this).data('value'), 10); // Ngôi sao hiện đang di chuột vào

            // Bây giờ đánh dấu tất cả các ngôi sao không phải sau ngôi sao lơ lửng hiện tại
            $(this).parent().children('li.star').each(function(e){
                if (e < onStar) {
                    $(this).addClass('hover');
                } else {
                    $(this).removeClass('hover');
                }
            });
        }).on('mouseout', function(){
            $(this).parent().children('li.star').each(function(e){
                $(this).removeClass('hover');
            });
        });
        /* 2. Hành động thực hiện khi nhấp chuột */
        $('#stars li').on('click', function(){
            var onStar = parseInt($(this).data('value'), 10); // Ngôi sao hiện được chọn
            var stars = $(this).parent().children('li.star');

            for (i = 0; i < stars.length; i++) {
                $(stars[i]).removeClass('selected');
            }
            for (i = 0; i < onStar; i++) {
                $(stars[i]).addClass('selected');
            }
        });
    });
    //-------------------------star----------------

    function star(){
        $('#stars .star').on('click', function(event) {
            event.preventDefault();
            /* Event sk*/
            let clickStar = $(this).val();
            console.log(clickStar)
            let  data1 = data.filter(function(a, b) {
                return a['star'] >= clickStar ;
            });

            let b = '';
            for (let i = 0; i < data1.length; i++) {
                let start = '';
                for (let y = 0 ; y < data1[i]['star'] ; y++){
                    start += '<i class="fas fa-star"></i>';
                }
                b +=
                    `<div class="card">
                <img src="${data1[i].image}" style="width:200px" height="200px">
                <h4 class"tenSp">${data1[i].name}</h4>
                <p class="price-">${data1[i].pricesale}</p>
                <p class="price">${data1[i].price}</p>
                <p class="category" style="display: none;">${data1[i].category}</p>
                <p>
                    ${start}
                </p>
                <p><button>
                    <a>Add to cart</a>
                </button></p>
                <div class="icon">${data1[i].sale}%</div>
            </div>`;
            }
            $('#myTable').html(b);
        })
    }


//    -------------------------log ra các số liệu từ data------------
//    -------------------
//     function checkData(){
//     $('#myInput').on('input paste change', function(event) {
//         event.preventDefault();
//         /* Event sk*/
//         var search = $(this).val().toLowerCase();
//         // console.log(search)
//
//         let dataFilter = data.filter(item=> item.val() == search)
//         console.log(dataFilter)
//
//         $('#myTable .card').filter(function() {
//             $(this).toggle($(this).val().toLowerCase().indexOf(search)>-1);
//             // console.log(this)
//         });
//     });


    // })
    // }

</script>
</body>
</html>
